{% extends "base.html" %}
{% load static %}

{% block title %}{{ item.title }}{% endblock %}

{% block extra_head %}
<style>
  .news-detail{max-width:880px;margin:24px auto;padding:0 16px}
  .news-detail h1{margin:0 0 16px;font-size:28px}
  .news-detail img{width:100%;max-height:420px;object-fit:cover;border-radius:12px;margin-bottom:20px}
  .news-meta{font-size:14px;color:#6b7280;margin-bottom:16px}
  .news-body{font-size:16px;line-height:1.6;color:#111827}
  .news-body p{margin:0 0 14px}
  .news-actions{margin-top:20px;display:flex;gap:12px}
  .btn{display:inline-block;padding:8px 14px;border-radius:8px;text-decoration:none}
  .btn-link{background:#f3f4f6;color:#111827}
  .btn-primary{background:#111827;color:#fff}
  .btn-danger{background:#dc2626;color:#fff}
</style>
{% endblock %}

{% block content %}
<div class="news-detail">
  <h1>{{ item.title }}</h1>

  <div class="news-meta">
    Đăng ngày {{ item.published_at|date:"d/m/Y H:i" }}
    {% if item.author %} · bởi {{ item.author.username }}{% endif %}
    {% if not item.is_published %} · <span style="color:#dc2626">[Unpublished]</span>{% endif %}
  </div>

  {% if item.image %}
    <img src="{{ item.image.url }}" alt="{{ item.title }}">
  {% endif %}

  <div class="news-body">
    {{ item.body|linebreaks }}
  </div>

  {% if item.link_url %}
    <p style="margin-top:20px">
      <a href="{{ item.link_url }}" target="_blank" class="btn btn-link">
        {{ item.link_label|default:"Đọc tại nguồn" }}
      </a>
    </p>
  {% endif %}

  {% if request.user.is_staff %}
    <div class="news-actions">
      <a href="{% url 'news:admin_edit' item.id %}" class="btn btn-primary">Sửa</a>
      <form method="post" action="{% url 'news:admin_delete' item.id %}" style="display:inline">
        {% csrf_token %}
        <button type="submit" class="btn btn-danger" onclick="return confirm('Xoá bài này?')">Xoá</button>
      </form>
    </div>
  {% endif %}
</div>
{% endblock %}
